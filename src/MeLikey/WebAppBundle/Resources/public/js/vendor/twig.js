/**
 * twig.js
 * https://github.com/schmittjoh/twig.js
 *
 * (C) 2011 Johannes M. Schmitt <schmittjoh@gmail.com>
 * Licensed under the Apache 2.0 License.
 *
 * Portions of this code are from the Google Closure Library received
 * from the Closure Authors under the Apache 2.0 License.
 */
(function() {function e(a){return function(){return this[a]}}var f,h=this;function m(a,b,c){a=a.split(".");c=c||h;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b}
function n(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function q(a){return"array"==n(a)}function r(a){return"string"==typeof a}function s(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var t="closure_uid_"+(1E9*Math.random()>>>0),u=0;function v(a,b,c){return a.call.apply(a.bind,arguments)}
function w(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function x(a,b,c){x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:w;return x.apply(null,arguments)}function y(a,b){m(a,b,void 0)};var z=/&/g,A=/</g,B=/>/g,C=/\"/g,D=/[&<>\"]/,E={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},F={"'":"\\'"};function G(a,b){null!=a&&this.append.apply(this,arguments)}G.prototype.b="";G.prototype.append=function(a,b,c){this.b+=a;if(null!=b)for(var d=1;d<arguments.length;d++)this.b+=arguments[d];return this};G.prototype.toString=e("b");function H(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function I(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return c}var J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(a,b){for(var c,d,g=1;g<arguments.length;g++){d=arguments[g];for(c in d)a[c]=d[c];for(var k=0;k<J.length;k++)c=J[k],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var L=Array.prototype,M=L.indexOf?function(a,b,c){return L.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(r(a))return r(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},N=L.forEach?function(a,b,c){L.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,g=r(a)?a.split(""):a,k=0;k<d;k++)k in g&&b.call(c,g[k],k,a)};var O=x,t="twig_ui_"+Math.floor(2147483648*Math.random()).toString(36);function P(a){return null===a||!1===a||void 0===a||0===a?!0:Q(a)?0===R(a):!1}function S(a,b){K.apply(null,Array.prototype.slice.call(arguments,0));return a}function Q(a){return q(a)||r(a)||s(a)}function R(a){if(q(a))return a.length;if(r(a))return a.length;if(s(a)){var b=0,c;for(c in a)b++;return b}throw Error(typeof a+" is not countable.");}function T(a,b,c){q(a)?N(a,b,c):H(a,b,c)};function U(a){this.env_=a;this.c=[];this.l={}}f=U.prototype;f.s=e("c");f.D=function(a){this.c=a};f.J=function(a){this.l=a};f.getParent=function(a){a=this.getParent_(a);return!1===a?!1:this.env_.d(a)};f.C=function(a,b,c){if(a in this.l){var d=new G;this.l[a](d,b,c||{});return d.toString()}d=this.getParent(b);if(!1!==d)return d.j(a,b,c);throw Error("The template '"+this.n()+"' has no parent, and no trait defining the block '"+a+"'.");};
f.j=function(a,b,c){if(c&&a in c){var d=new G,g=c[a];delete c[a];g(d,b,c);return d.toString()}if(a in this.c)return d=new G,this.c[a](d,b,c||null),d.toString();d=this.getParent(b);return!1!==d?d.j(a,b,c):""};f.i=function(a,b){var c=new G;this.render_(c,a||{},b||{});return c.toString()};
f.q=function(a,b,c,d){if(!a["get"+b])throw Error("The macro "+b+" is not defined in "+a.n()+".");if(void 0===d)return a["get"+b].apply(a,c);throw Error("Positional arguments, or default values in macro arguments are not supported, yet.");};function V(a){this.r=a}V.prototype.toString=e("r");function W(a,b,c,d,g){if(g&&b instanceof V)return b.toString();b=null==b?"":String(b);if(X===c){a=String(b);if(a.quote)b=a.quote();else{b=['"'];for(c=0;c<a.length;c++){var k=a.charAt(c),l=k.charCodeAt(0);d=b;g=c+1;var p;if(!(p=E[k])){if(!(31<l&&127>l))if(k in F)k=F[k];else if(k in E)k=F[k]=E[k];else{l=k;p=k.charCodeAt(0);if(31<p&&127>p)l=k;else{if(256>p){if(l="\\x",16>p||256<p)l+="0"}else l="\\u",4096>p&&(l+="0");l+=p.toString(16).toUpperCase()}k=F[k]=l}p=k}d[g]=p}b.push('"');b=b.join("")}return b.substring(1,
b.length-1)}if(!c||Y===c)return a=b,D.test(a)&&(-1!=a.indexOf("\x26")&&(a=a.replace(z,"\x26amp;")),-1!=a.indexOf("\x3c")&&(a=a.replace(A,"\x26lt;")),-1!=a.indexOf("\x3e")&&(a=a.replace(B,"\x26gt;")),-1!=a.indexOf('"')&&(a=a.replace(C,"\x26quot;"))),a;if(Z===c)return encodeURIComponent(b);throw Error("The type '"+c+"' is not supported.");}var Y="html",X="js",Z="url";function $(){this.a={};this.f={};this.g={};this.k={};this.e={};this.o={};this.p=!1;this.K="UTF-8"}f=$.prototype;f.i=function(a,b){var c=this.d(a);return c.i.call(c,S({},this.o,b||{}))};f.filter=function(a,b,c){if(!(a in this.f))throw Error("The filter '"+a+"' does not exist.");return this.f[a].apply(null,Array.prototype.slice.call(arguments,1))};
f.w=function(a,b,c){if(!(a in this.g))throw Error("The function '"+a+"' does not exist.");return this.g[a].apply(null,Array.prototype.slice.call(arguments,1))};f.test=function(a,b,c){if(!(a in this.k))throw Error("The test '"+a+"' does not exist.");return this.k[a].apply(null,Array.prototype.slice.call(arguments,1))};f.escape=function(a,b,c,d){return W(0,a,b,0,d)};
f.A=function(a,b,c){var d=this.d(a),g=d["get"+b];if(!g)throw Error("The macro '"+b+"' does not exist on template '"+d.n()+"'.");return g.apply(d,Array.prototype.slice.call(arguments,2)).toString()};f.G=function(a,b){this.f[a]=b};f.H=function(a,b){this.g[a]=b};f.I=function(a,b){this.k[a]=b};f.u=e("o");f.h=function(){this.p=!0;H(this.a,function(a){a.h()},this)};f.v=function(a){return a in this.a};f.getExtension=function(a){if(!(a in this.a))throw Error('The "'+a+'" extension is not enabled.');return this.a[a]};
f.m=function(a){this.a[a.getName()]=a};f.B=function(a){delete this.a[a]};f.F=function(a){H(a,function(a){this.m(a)})};f.t=e("a");f.d=function(a){var b=a[t]||(a[t]=++u);if(b in this.e)return this.e[b];!1===this.p&&this.h();a=new a(this);return this.e[b]=a};window.Twig=new $;y("goog.provide",function(a){m(a)});y("goog.require",function(){});y("twig.attr",function(a,b,c,d,g){d=d||"any";g=void 0!==g?g:!1;if(!s(a)&&!q(a))return g?!1:null;if(b in a){if("array"!==d&&"function"==n(a[b]))return g?!0:a[b].apply(a,c||[]);if("method"!==d)return g?!0:a[b]}if("array"===d||q(a))return g?!1:null;b=b.toLowerCase();var k="get"+b,l="is"+b;return(b=I(a,function(a,b){b=b.toLowerCase();return b===k||b===l}))&&"function"==n(a[b])?g?!0:a[b].apply(a,c||[]):g?!1:null});
y("twig.bind",O);y("twig.inherits",function(a,b){function c(){}c.prototype=b.prototype;a.L=b.prototype;a.prototype=new c});y("twig.extend",S);y("twig.spaceless",function(a){return a.replace(/>[\s\xa0]+</g,"\x3e\x3c").replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")});y("twig.range",function(a,b){for(var c=[];a<=b;a+=1)c.push(a);return c});y("twig.contains",function(a,b){var c;if(q(a))c=0<=M(a,b);else if(r(a))c=-1!=a.indexOf(b);else a:{for(c in a)if(a[c]==b){c=!0;break a}c=!1}return c});y("twig.countable",Q);
y("twig.count",R);y("twig.forEach",T);y("twig.empty",P);y("twig.createObj",function(a){for(var b={},c=0;c<arguments.length;c+=2)b[arguments[c]]=arguments[c+1];return b});y("twig.filter.capitalize",function(a,b){return b.charAt(0).toUpperCase()+b.substring(1)});y("twig.filter.escape",W);y("twig.filter.length",function(a,b){return R(b)});y("twig.filter.def",function(a,b){return P(a)?b||"":a});y("twig.filter.replace",function(a,b){for(var c in b)a=a.replace(RegExp(c,"g"),b[c]);return a});
y("twig.filter.join",function(a,b){var c=b||"",d=new G,g=!0;T(a,function(a){g||d.append(c);g=!1;d.append(a)});return d.toString()});y("twig.filter.keys",function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b});y("twig.filter.upper",function(a,b){return b.toUpperCase()});y("twig.filter.lower",function(a,b){return b.toLowerCase()});y("twig.filter.nl2br",function(a){return a.replace(/\n/g,"\x3cbr /\x3e")});y("twig.StringBuffer",G);G.prototype.append=G.prototype.append;G.prototype.toString=G.prototype.toString;
$.prototype.createTemplate=$.prototype.d;$.prototype.filter=$.prototype.filter;$.prototype.invoke=$.prototype.w;$.prototype.test=$.prototype.test;$.prototype.escape=$.prototype.escape;$.prototype.macro=$.prototype.A;$.prototype.setFilter=$.prototype.G;$.prototype.setFunction=$.prototype.H;$.prototype.setTest=$.prototype.I;$.prototype.render=$.prototype.i;$.prototype.getGlobals=$.prototype.u;$.prototype.initRuntime=$.prototype.h;$.prototype.hasExtension=$.prototype.v;$.prototype.getExtension=$.prototype.getExtension;
$.prototype.addExtension=$.prototype.m;$.prototype.removeExtension=$.prototype.B;$.prototype.setExtensions=$.prototype.F;$.prototype.getExtensions=$.prototype.t;y("twig.Template",U);U.prototype.setTraits=U.prototype.J;U.prototype.setBlocks=U.prototype.D;U.prototype.getBlocks=U.prototype.s;U.prototype.renderParentBlock=U.prototype.C;U.prototype.renderBlock=U.prototype.j;U.prototype.callMacro=U.prototype.q;y("twig.Markup",V);})();
